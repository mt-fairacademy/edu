<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz — Supplier Code of Conduct | Salvatore Ferragamo Group</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --gold: #B8963E;
      --gold-light: #D4AF62;
      --gold-pale: #F5EDD6;
      --ink: #1A1714;
      --ink-mid: #3D3730;
      --ink-soft: #6B6058;
      --cream: #FAF7F2;
      --white: #FFFFFF;
      --border: #E2D9C8;
      --correct: #2D6A4F;
      --correct-bg: #EEF7F2;
      --wrong: #9B2335;
      --wrong-bg: #FBEEF0;
      --neutral: #4A6FA5;
      --neutral-bg: #EDF2FA;
      --shadow: 0 4px 32px rgba(26,23,20,0.08);
      --shadow-card: 0 2px 16px rgba(26,23,20,0.06);
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--cream);
      color: var(--ink);
      min-height: 100vh;
      font-size: 15px;
      line-height: 1.65;
    }

    /* ─── HEADER ─── */
    .site-header {
      background: var(--ink);
      color: var(--white);
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 2px solid var(--gold);
    }
    .header-inner {
      max-width: 900px;
      margin: 0 auto;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }
    .brand { display: flex; align-items: center; gap: 14px; }
    .brand-monogram {
      width: 36px; height: 36px;
      border: 1.5px solid var(--gold);
      display: flex; align-items: center; justify-content: center;
      font-family: 'Cormorant Garamond', serif;
      font-size: 18px; color: var(--gold);
      letter-spacing: 1px; flex-shrink: 0;
    }
    .brand-text { display: flex; flex-direction: column; }
    .brand-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: 15px; font-weight: 600; color: var(--white);
      letter-spacing: 1.5px; text-transform: uppercase; line-height: 1.2;
    }
    .brand-sub { font-size: 11px; color: var(--gold-light); letter-spacing: 0.5px; font-weight: 300; }
    .progress-wrap { display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
    .progress-label { font-size: 11px; color: rgba(255,255,255,0.55); letter-spacing: 0.5px; white-space: nowrap; }
    #progress-bar-outer { width: 120px; height: 3px; background: rgba(255,255,255,0.15); border-radius: 2px; overflow: hidden; }
    #progress-bar-fill { height: 100%; background: var(--gold); border-radius: 2px; width: 0%; transition: width 0.5s ease; }
    #progress-counter { font-size: 11px; color: var(--gold-light); letter-spacing: 0.5px; min-width: 32px; text-align: right; }

    /* ─── MAIN ─── */
    main { max-width: 900px; margin: 0 auto; padding: 40px 24px 80px; }

    /* ─── INTRO CARD ─── */
    .intro-card {
      background: var(--white); border: 1px solid var(--border);
      border-top: 3px solid var(--gold); padding: 40px 48px;
      margin-bottom: 40px; box-shadow: var(--shadow-card);
    }
    .intro-label { font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); font-weight: 500; margin-bottom: 10px; }
    .intro-card h1 { font-family: 'Cormorant Garamond', serif; font-size: 36px; font-weight: 600; line-height: 1.2; color: var(--ink); margin-bottom: 6px; }
    .intro-card h2 { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 400; font-style: italic; color: var(--ink-soft); margin-bottom: 24px; }

    .meta-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: var(--border); border: 1px solid var(--border); margin-bottom: 28px; }
    .meta-item { background: var(--cream); padding: 14px 16px; text-align: center; }
    .meta-value { font-family: 'Cormorant Garamond', serif; font-size: 22px; font-weight: 600; color: var(--gold); display: block; line-height: 1.2; }
    .meta-key { font-size: 11px; color: var(--ink-soft); letter-spacing: 0.5px; }

    .theme-legend { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; }
    .theme-badge { display: inline-flex; align-items: center; gap: 5px; padding: 4px 10px; border-radius: 2px; font-size: 11.5px; font-weight: 500; letter-spacing: 0.3px; }
    .theme-badge.etica    { background: #F0EBE0; color: #7A5C28; border: 1px solid #D4B87A; }
    .theme-badge.lavoro   { background: #EAF0F5; color: #2D5073; border: 1px solid #7BAACA; }
    .theme-badge.ecosist  { background: #EAF2EC; color: #2A5C3A; border: 1px solid #7AB88A; }
    .theme-badge.prodotto { background: #F0EAF5; color: #5A2D73; border: 1px solid #AA7AC8; }
    .theme-badge.gov      { background: #F5EAEA; color: #732D2D; border: 1px solid #C87A7A; }
    .theme-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
    .theme-badge.etica .theme-dot    { background: #B8963E; }
    .theme-badge.lavoro .theme-dot   { background: #4A8AB8; }
    .theme-badge.ecosist .theme-dot  { background: #4A9B5E; }
    .theme-badge.prodotto .theme-dot { background: #8B5AB8; }
    .theme-badge.gov .theme-dot      { background: #B85A5A; }

    .user-fields { display: grid; grid-template-columns: 1fr auto auto; gap: 12px; margin-top: 24px; align-items: end; }
    .field-group { display: flex; flex-direction: column; gap: 4px; }
    .field-group label { font-size: 11px; color: var(--ink-soft); letter-spacing: 0.5px; text-transform: uppercase; }
    .field-group input { background: var(--cream); border: 1px solid var(--border); padding: 8px 12px; font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--ink); outline: none; transition: border-color 0.2s; }
    .field-group input:focus { border-color: var(--gold); }
    .btn-start { background: var(--gold); color: var(--white); border: none; padding: 10px 28px; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 500; letter-spacing: 1px; text-transform: uppercase; cursor: pointer; transition: background 0.2s, transform 0.15s; white-space: nowrap; align-self: end; }
    .btn-start:hover { background: var(--gold-light); transform: translateY(-1px); }

    /* ─── QUIZ AREA ─── */
    #quiz-area { display: none; }

    .section-divider { display: flex; align-items: center; gap: 12px; margin: 0 0 32px; }
    .section-divider::before, .section-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
    .section-divider span { font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: var(--ink-soft); white-space: nowrap; }

    /* ─── QUESTION CARD ─── */
    .question-card { background: var(--white); border: 1px solid var(--border); margin-bottom: 24px; box-shadow: var(--shadow-card); transition: box-shadow 0.2s; animation: slideIn 0.3s ease; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
    .question-card.answered { box-shadow: none; }

    .q-header { display: flex; align-items: center; gap: 0; border-bottom: 1px solid var(--border); }
    .q-num { padding: 14px 18px; background: var(--ink); color: var(--gold-light); font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 600; min-width: 60px; text-align: center; flex-shrink: 0; }
    .q-theme-tag { padding: 14px 14px; font-size: 11px; letter-spacing: 0.8px; text-transform: uppercase; font-weight: 500; flex-shrink: 0; border-right: 1px solid var(--border); }
    .q-theme-tag.etica    { color: #7A5C28; background: #FAF5EB; }
    .q-theme-tag.lavoro   { color: #2D5073; background: #F0F5FA; }
    .q-theme-tag.ecosist  { color: #2A5C3A; background: #EEF5F0; }
    .q-theme-tag.prodotto { color: #5A2D73; background: #F5EEF9; }
    .q-theme-tag.gov      { color: #732D2D; background: #F9EEEE; }
    .q-status { margin-left: auto; padding: 14px 18px; font-size: 18px; opacity: 0; transition: opacity 0.3s; }

    .q-text { padding: 22px 24px 18px; font-size: 15px; line-height: 1.6; color: var(--ink-mid); }

    .options-list { list-style: none; padding: 0 24px 24px; display: flex; flex-direction: column; gap: 8px; }
    .option-item { display: flex; align-items: flex-start; gap: 0; border: 1.5px solid var(--border); cursor: pointer; transition: border-color 0.15s, background 0.15s; user-select: none; }
    .option-item:hover { border-color: var(--gold); background: var(--gold-pale); }
    .option-item.selected { border-color: var(--gold); background: var(--gold-pale); }
    .option-item.correct { border-color: var(--correct); background: var(--correct-bg); cursor: default; }
    .option-item.wrong   { border-color: var(--wrong);   background: var(--wrong-bg);  cursor: default; }
    .option-item.locked  { cursor: default; }
    .option-item.locked:hover:not(.correct):not(.wrong) { border-color: var(--border); background: transparent; }

    .option-letter { padding: 11px 14px; font-family: 'Cormorant Garamond', serif; font-size: 17px; font-weight: 600; color: var(--ink-soft); border-right: 1.5px solid var(--border); flex-shrink: 0; min-width: 44px; text-align: center; }
    .option-item.correct .option-letter { color: var(--correct); border-color: var(--correct); }
    .option-item.wrong   .option-letter { color: var(--wrong);   border-color: var(--wrong); }
    .option-text { padding: 11px 14px; font-size: 14px; line-height: 1.5; color: var(--ink-mid); flex: 1; }

    .explanation { display: none; margin: 0 24px 20px; padding: 14px 16px; border-left: 3px solid var(--gold); background: var(--gold-pale); font-size: 13.5px; line-height: 1.6; color: var(--ink-mid); animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .explanation.show { display: block; }
    .explanation strong { color: var(--ink); font-weight: 500; }

    .q-nav { display: flex; justify-content: flex-end; padding: 0 24px 20px; }
    .btn-confirm { background: var(--ink); color: var(--white); border: none; padding: 9px 24px; font-family: 'DM Sans', sans-serif; font-size: 12px; font-weight: 500; letter-spacing: 1px; text-transform: uppercase; cursor: pointer; transition: background 0.2s; }
    .btn-confirm:hover { background: var(--ink-mid); }
    .btn-confirm:disabled { background: var(--border); color: var(--ink-soft); cursor: not-allowed; }

    /* ─── SUBMIT ─── */
    #submit-section { display: none; background: var(--white); border: 1px solid var(--border); border-top: 3px solid var(--gold); padding: 40px 48px; margin-top: 40px; text-align: center; box-shadow: var(--shadow-card); }
    #submit-section h3 { font-family: 'Cormorant Garamond', serif; font-size: 22px; font-weight: 600; margin-bottom: 8px; }
    #submit-section p { color: var(--ink-soft); margin-bottom: 24px; font-size: 14px; }
    .btn-submit { background: var(--gold); color: var(--white); border: none; padding: 13px 40px; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 500; letter-spacing: 1.5px; text-transform: uppercase; cursor: pointer; transition: background 0.2s, transform 0.15s; }
    .btn-submit:hover { background: var(--gold-light); transform: translateY(-1px); }

    /* ─── RESULTS ─── */
    #results-section { display: none; animation: slideIn 0.4s ease; }
    .results-card { background: var(--white); border: 1px solid var(--border); border-top: 4px solid var(--gold); padding: 48px; margin-bottom: 32px; box-shadow: var(--shadow); text-align: center; }
    .results-label { font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: var(--gold); margin-bottom: 16px; }
    .score-display { font-family: 'Cormorant Garamond', serif; font-size: 80px; font-weight: 600; line-height: 1; color: var(--ink); margin-bottom: 4px; }
    .score-denom { font-size: 32px; color: var(--ink-soft); }
    .score-pct { font-size: 18px; color: var(--ink-soft); margin-bottom: 20px; }
    .grade-badge { display: inline-block; padding: 10px 28px; font-size: 14px; font-weight: 500; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 28px; }
    .grade-badge.eccellente { background: #E8F5E9; color: #1B5E20; border: 1px solid #4CAF50; }
    .grade-badge.buono      { background: #E3F2FD; color: #0D47A1; border: 1px solid #42A5F5; }
    .grade-badge.suff       { background: #FFF8E1; color: #E65100; border: 1px solid #FFB74D; }
    .grade-badge.insuff     { background: #FFEBEE; color: #B71C1C; border: 1px solid #EF9A9A; }

    .grade-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1px; background: var(--border); border: 1px solid var(--border); margin-bottom: 24px; }
    .grade-cell { background: var(--cream); padding: 16px; text-align: center; }
    .grade-cell-val { font-family: 'Cormorant Garamond', serif; font-size: 24px; font-weight: 600; color: var(--gold); }
    .grade-cell-key { font-size: 11px; color: var(--ink-soft); }

    .area-breakdown { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 24px; }
    .area-cell { border: 1px solid var(--border); padding: 14px 10px; text-align: center; background: var(--cream); }
    .area-cell-name { font-size: 11px; color: var(--ink-soft); margin-bottom: 6px; }
    .area-cell-score { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 600; color: var(--ink); }
    .area-cell-score.perfect { color: var(--correct); }

    .btn-review { background: transparent; color: var(--ink); border: 1.5px solid var(--ink); padding: 10px 28px; font-family: 'DM Sans', sans-serif; font-size: 12px; font-weight: 500; letter-spacing: 1px; text-transform: uppercase; cursor: pointer; margin-top: 8px; margin-right: 10px; transition: background 0.2s; }
    .btn-review:hover { background: var(--cream); }
    .btn-reset { background: var(--gold); color: var(--white); border: none; padding: 10px 28px; font-family: 'DM Sans', sans-serif; font-size: 12px; font-weight: 500; letter-spacing: 1px; text-transform: uppercase; cursor: pointer; margin-top: 8px; transition: background 0.2s; }
    .btn-reset:hover { background: var(--gold-light); }

    .eval-card { background: var(--white); border: 1px solid var(--border); padding: 32px 40px; margin-bottom: 24px; }
    .eval-card h3 { font-family: 'Cormorant Garamond', serif; font-size: 22px; margin-bottom: 20px; color: var(--ink); }
    .eval-table { width: 100%; border-collapse: collapse; font-size: 13.5px; }
    .eval-table th { background: var(--ink); color: var(--gold-light); padding: 10px 14px; text-align: left; font-weight: 500; letter-spacing: 0.5px; font-size: 12px; }
    .eval-table td { padding: 10px 14px; border-bottom: 1px solid var(--border); }
    .eval-table tr:last-child td { border-bottom: none; }
    .eval-table tr:nth-child(even) td { background: var(--cream); }

    @media (max-width: 640px) {
      .intro-card, #submit-section, .results-card, .eval-card { padding: 24px 20px; }
      .meta-grid { grid-template-columns: repeat(2, 1fr); }
      .area-breakdown { grid-template-columns: repeat(3, 1fr); }
      .grade-grid { grid-template-columns: repeat(3, 1fr); }
      .user-fields { grid-template-columns: 1fr; }
      main { padding: 24px 16px 60px; }
      .score-display { font-size: 56px; }
      #progress-bar-outer { width: 70px; }
    }
  </style>
</head>
<body>

<!-- ═══ HEADER ═══ -->
<header class="site-header">
  <div class="header-inner">
    <div class="brand">
      <div class="brand-monogram">SF</div>
      <div class="brand-text">
        <span class="brand-name">Ferragamo Group</span>
        <span class="brand-sub">Supplier Code of Conduct — Verifica</span>
      </div>
    </div>
    <div class="progress-wrap">
      <span class="progress-label">Avanzamento</span>
      <div id="progress-bar-outer"><div id="progress-bar-fill"></div></div>
      <span id="progress-counter">0/20</span>
    </div>
  </div>
</header>

<main>

  <!-- ═══ INTRO ═══ -->
  <div class="intro-card" id="intro-card">
    <div class="intro-label">Quiz di Verifica</div>
    <h1>Supplier Code of Conduct</h1>
    <h2>Salvatore Ferragamo Group</h2>

    <div class="meta-grid">
      <div class="meta-item"><span class="meta-value">20</span><span class="meta-key">Domande</span></div>
      <div class="meta-item"><span class="meta-value">4</span><span class="meta-key">Opzioni ciascuna</span></div>
      <div class="meta-item"><span class="meta-value">13/20</span><span class="meta-key">Soglia sufficienza</span></div>
      <div class="meta-item"><span class="meta-value">18/20</span><span class="meta-key">Soglia eccellenza</span></div>
    </div>

    <div class="theme-legend">
      <span class="theme-badge etica"><span class="theme-dot"></span>Etica D1–D4</span>
      <span class="theme-badge lavoro"><span class="theme-dot"></span>Lavoro D5–D9</span>
      <span class="theme-badge ecosist"><span class="theme-dot"></span>Ecosistemi D10–D12</span>
      <span class="theme-badge prodotto"><span class="theme-dot"></span>Prodotto D13–D14</span>
      <span class="theme-badge gov"><span class="theme-dot"></span>Governance D15–D20</span>
    </div>

    <div class="user-fields">
      <div class="field-group">
        <label for="field-nome">Nome e Cognome</label>
        <input type="text" id="field-nome" placeholder="es. Mario Rossi" />
      </div>
      <div class="field-group">
        <label for="field-data">Data</label>
        <input type="text" id="field-data" readonly />
      </div>
      <button class="btn-start" id="btn-start">Inizia il Quiz →</button>
    </div>
  </div>

  <!-- ═══ QUIZ AREA ═══ -->
  <div id="quiz-area">
    <div class="section-divider"><span>Domande</span></div>
    <div id="questions-container"></div>
  </div>

  <!-- ═══ SUBMIT ═══ -->
  <div id="submit-section">
    <h3>Quiz completato</h3>
    <p>Hai risposto a tutte le 20 domande. Clicca per visualizzare il risultato.</p>
    <button class="btn-submit" id="btn-submit">Visualizza Risultato →</button>
  </div>

  <!-- ═══ RESULTS ═══ -->
  <div id="results-section">
    <div class="results-card">
      <div class="results-label">Risultato finale</div>
      <div class="score-display" id="score-num">—</div>
      <div class="score-pct" id="score-pct"></div>
      <div id="grade-badge" class="grade-badge"></div>

      <div class="grade-grid">
        <div class="grade-cell"><div class="grade-cell-val" id="r-trent">—</div><div class="grade-cell-key">Scala /30</div></div>
        <div class="grade-cell"><div class="grade-cell-val" id="r-dec">—</div><div class="grade-cell-key">Scala /10</div></div>
        <div class="grade-cell"><div class="grade-cell-val" id="r-level">—</div><div class="grade-cell-key">Livello</div></div>
      </div>

      <div class="area-breakdown" id="area-breakdown"></div>

      <div style="margin-top:32px;">
        <button class="btn-review" id="btn-review">← Rivedi le risposte</button>
        <button class="btn-reset" id="btn-reset">Ricomincia</button>
      </div>
    </div>

    <div class="eval-card">
      <h3>Griglia di Valutazione</h3>
      <table class="eval-table">
        <thead>
          <tr><th>Punteggio</th><th>Scala /30</th><th>Scala /10</th><th>Livello</th></tr>
        </thead>
        <tbody>
          <tr><td>18–20</td><td>27–30 / 30</td><td>9–10 / 10</td><td>Eccellente</td></tr>
          <tr><td>15–17</td><td>23–26 / 30</td><td>7–8 / 10</td><td>Buono</td></tr>
          <tr><td>13–14</td><td>18–22 / 30</td><td>6 / 10</td><td>Sufficiente</td></tr>
          <tr><td>10–12</td><td>12–17 / 30</td><td>5 / 10</td><td>Insufficiente</td></tr>
          <tr><td>0–9</td><td>&lt; 12 / 30</td><td>&lt; 5 / 10</td><td>Non sufficiente</td></tr>
        </tbody>
      </table>
    </div>
  </div>

</main>

<script>
const QUESTIONS = [
  {
    id: 'D1', theme: 'etica', themeLabel: 'Etica',
    text: 'D1. [Etica] Un fornitore opera in un paese dove la normativa locale è meno restrittiva del Supplier Code of Conduct di Ferragamo. Cosa deve fare?',
    options: [
      'Applicare sempre le disposizioni del Codice Ferragamo, che prevale su tutto',
      'Applicare lo standard più stringente tra il Codice e la normativa locale, segnalando la divergenza al Gruppo',
      'Applicare la normativa locale, che in quanto legge ha forza superiore',
      'Sospendere le attività fino a ricezione di istruzioni dal Gruppo'
    ],
    correct: 1,
    explanation: 'Il Codice adotta il principio dello standard più elevato: quando normativa locale e Codice divergono, si applica quello più restrittivo. Il fornitore deve inoltre segnalare la divergenza al Gruppo. Questo garantisce che la tutela non venga mai erosa da contesti normativi più permissivi.'
  },
  {
    id: 'D2', theme: 'etica', themeLabel: 'Etica',
    text: 'D2. [Etica] Quale delle seguenti azioni configura una violazione della sezione anti-corruzione del Codice?',
    options: [
      'Scambiare campioni di prodotti tra fornitore e cliente',
      'Offrire un regalo che eccede le normali pratiche di cortesia per ottenere un trattamento favorevole',
      'Organizzare un evento di team building con i dipendenti Ferragamo',
      'Richiedere una referenza commerciale prima di avviare una fornitura'
    ],
    correct: 1,
    explanation: 'Il Codice vieta qualsiasi forma di corruzione: offrire regali che superano le normali pratiche di cortesia per influenzare decisioni commerciali è esplicitamente proibito. Gli altri comportamenti descritti sono pratiche commerciali lecite.'
  },
  {
    id: 'D3', theme: 'etica', themeLabel: 'Etica',
    text: 'D3. [Etica] Un fornitore riceve materiali riservati (specifiche tecniche, design) da Ferragamo per produrre una commessa. Cosa stabilisce il Codice?',
    options: [
      'Il fornitore può condividere le specifiche con altri clienti se utile a migliorare la qualità del prodotto',
      'Al termine del rapporto commerciale, i materiali possono essere conservati come riferimento per la propria R&D',
      'Il fornitore deve utilizzarli esclusivamente per produrre i prodotti e cessarne immediatamente l\'uso al termine del contratto',
      'La condivisione con sub-fornitori è permessa senza autorizzazione se necessaria alla produzione'
    ],
    correct: 2,
    explanation: 'Il principio 3.4 sulla riservatezza stabilisce che i materiali e le informazioni riservate fornite dal Gruppo devono essere utilizzati esclusivamente per la produzione delle commesse e non possono essere condivisi né conservati dopo la fine del rapporto contrattuale.'
  },
  {
    id: 'D4', theme: 'etica', themeLabel: 'Etica',
    text: 'D4. [Etica] Quale dei seguenti comportamenti è richiesto ai fornitori in relazione al Made in Italy (principio 3.7)?',
    options: [
      'Produrre esclusivamente in Italia per poter lavorare con Ferragamo',
      'Opporsi alla contraffazione e garantire la corretta etichettatura Made in Italy, contribuendo alla prosperità delle comunità locali',
      'Utilizzare solo materie prime italiane per tutti i prodotti del Gruppo',
      'Certificare i propri processi produttivi con il marchio "100% Made in Italy"'
    ],
    correct: 1,
    explanation: 'Il principio 3.7 non richiede che la produzione avvenga esclusivamente in Italia, né l\'uso esclusivo di materie prime italiane. Richiede invece che i fornitori combattano la contraffazione, garantiscano la corretta etichettatura e contribuiscano alla salvaguardia del patrimonio artigianale italiano.'
  },
  {
    id: 'D5', theme: 'lavoro', themeLabel: 'Lavoro',
    text: 'D5. [Lavoro] Quale delle seguenti situazioni è conforme al principio sul lavoro minorile (3.8) del Codice?',
    options: [
      'Un ragazzo di 15 anni che lavora part-time in un laboratorio durante il fine settimana',
      'Un diciassettenne che lavora di giorno in un laboratorio, che ha completato l\'obbligo scolastico, in attività non pericolose',
      'Un sedicenne che lavora 4 ore in turno notturno con la supervisione di un adulto',
      'Un quindicenne inserito in tirocinio scolastico per 20 ore settimanali in mansioni amministrative'
    ],
    correct: 1,
    explanation: 'Il Codice fissa la soglia minima a 16 anni (in linea con ILO). I minori tra 16 e 18 anni possono lavorare solo se hanno completato l\'obbligo scolastico, non in orario notturno e non in attività pericolose. Un 17enne che lavora di giorno in attività non pericolose, avendo completato l\'obbligo scolastico, è l\'unica situazione conforme.'
  },
  {
    id: 'D6', theme: 'lavoro', themeLabel: 'Lavoro',
    text: 'D6. [Lavoro] Quale delle seguenti pratiche costituisce una forma di lavoro forzato secondo il principio 3.10?',
    options: [
      'Richiedere al lavoratore di completare un periodo di prova prima della stabilizzazione',
      'Trattenere i documenti d\'identità del lavoratore come condizione di impiego',
      'Applicare un contratto a termine rinnovabile per il primo anno di impiego',
      'Richiedere la disponibilità del lavoratore a effettuare straordinari retribuiti'
    ],
    correct: 1,
    explanation: 'Il principio 3.10 elenca esplicitamente la ritenzione dei documenti d\'identità come pratica di modern slavery e lavoro forzato. Il Codice vieta anche i depositi in denaro come condizione di assunzione e qualsiasi restrizione alla libertà di movimento dei lavoratori.'
  },
  {
    id: 'D7', theme: 'lavoro', themeLabel: 'Lavoro',
    text: 'D7. [Lavoro] Il principio di non discriminazione (3.11) del Codice protegge i lavoratori da discriminazioni basate su:',
    options: [
      'Solo età, genere e disabilità fisica',
      'Età, origine etnica, nazionalità, opinioni politiche e sindacali, credo religioso, orientamento sessuale, identità di genere, disabilità fisiche e psicologiche',
      'Genere, nazionalità e credo religioso, in conformità alle Convenzioni ILO C111',
      'Tutte le caratteristiche personali, inclusa la capacità lavorativa e il livello di istruzione'
    ],
    correct: 1,
    explanation: 'Il principio 3.11 copre 9 dimensioni protette esplicitamente nominate, includendo anche gender identity e disabilità psicologica — elementi meno comuni in codici simili. Questo va oltre i minimi ILO e riflette un approccio avanzato alla non discriminazione.'
  },
  {
    id: 'D8', theme: 'lavoro', themeLabel: 'Lavoro',
    text: 'D8. [Lavoro] Cosa stabilisce il principio sulla retribuzione (3.15) del Codice rispetto al salario?',
    options: [
      'La retribuzione deve essere almeno pari al salario minimo previsto dalla legge',
      'La retribuzione è libera, purché concordata contrattualmente tra le parti',
      'La retribuzione deve essere conforme alla legge E adeguata a soddisfare i bisogni primari, garantendo standard di vita rispettosi della dignità',
      'La retribuzione deve includere benefit in natura per almeno il 10% del totale'
    ],
    correct: 2,
    explanation: 'Il principio 3.15 introduce il concetto di living wage, andando oltre il semplice rispetto del salario minimo legale: la retribuzione deve essere sufficiente a soddisfare i bisogni primari e garantire standard di vita dignitosi. Questo è uno degli aspetti più avanzati del Codice rispetto alla media del settore.'
  },
  {
    id: 'D9', theme: 'lavoro', themeLabel: 'Lavoro',
    text: 'D9. [Lavoro] Quale delle seguenti NON è un obbligo vincolante del principio sui contratti (3.17)?',
    options: [
      'Fornire ai dipendenti un contratto scritto e comprensibile',
      'Garantire contributi previdenziali, welfare e copertura assicurativa',
      'Permettere ai lavoratori di accedere alle proprie informazioni contrattuali registrate',
      'Prevedere un piano aziendale di welfare integrativo oltre ai minimi di legge'
    ],
    correct: 3,
    explanation: 'Il principio 3.17 richiede contratti scritti e comprensibili, contributi previdenziali e accesso del lavoratore alle proprie informazioni. Il welfare integrativo aziendale non è un obbligo vincolante del Codice — è al più una raccomandazione, non un requisito obbligatorio.'
  },
  {
    id: 'D10', theme: 'ecosist', themeLabel: 'Ecosistemi',
    text: 'D10. [Ecosistemi] Riguardo al benessere animale (3.19), il Codice richiede che gli animali utilizzati per la produzione:',
    options: [
      'Vengano trattati conformemente alle norme CITES per le specie protette',
      'Non debbano soffrire, in linea con i criteri della Commissione Europea e dell\'OIE (World Organization for Animal Health)',
      'Vengano abbattuti esclusivamente da personale veterinario certificato',
      'Vengano abbattuti con metodi approvati dalla normativa nazionale del paese di produzione'
    ],
    correct: 1,
    explanation: 'Il principio 3.19 fa riferimento ai criteri della Commissione Europea e dell\'OIE come standard di riferimento per il benessere animale, con particolare attenzione a che gli animali non soffrano. Il riferimento CITES riguarda le specie protette, ma il principio sul benessere è più ampio e riguarda l\'intera gestione degli animali nella filiera.'
  },
  {
    id: 'D11', theme: 'ecosist', themeLabel: 'Ecosistemi',
    text: 'D11. [Ecosistemi] Il principio sulla gestione energetica (3.20) richiede ai fornitori di:',
    options: [
      'Utilizzare esclusivamente energia rinnovabile entro 3 anni dalla firma del Codice',
      'Misurare e tracciare i consumi energetici, differenziando tra fonti rinnovabili e non rinnovabili, e ridurre attivamente le emissioni GHG',
      'Ottenere una certificazione ISO 50001 entro il primo anno di fornitura',
      'Compensare le proprie emissioni acquistando certificati di carbon offset verificati'
    ],
    correct: 1,
    explanation: 'Il principio 3.20 non impone l\'uso esclusivo di rinnovabili né una certificazione specifica. Richiede la misurazione e il tracking dei consumi energetici (distinguendo tra fonti rinnovabili e non) e la riduzione attiva delle emissioni GHG. È il primo passo verso la decarbonizzazione della supply chain, in linea con le aspettative CSRD e il GHG Protocol Scope 3.'
  },
  {
    id: 'D12', theme: 'ecosist', themeLabel: 'Ecosistemi',
    text: 'D12. [Ecosistemi] Riguardo alla gestione dei rifiuti (3.21), il Codice stabilisce che i fornitori devono:',
    options: [
      'Azzerare la produzione di rifiuti pericolosi entro 2 anni',
      'Essere in possesso delle informazioni relative a trattamento, trasporto e destinazione dei rifiuti generati in tutte le fasi produttive',
      'Destinare almeno il 50% dei rifiuti al riciclo o al riuso',
      'Esternalizzare obbligatoriamente la gestione dei rifiuti pericolosi a fornitori certificati'
    ],
    correct: 1,
    explanation: 'Il principio 3.21 si concentra sulla tracciabilità: i fornitori devono conoscere e documentare il ciclo completo dei propri rifiuti (trattamento, trasporto, destinazione). Non fissa target percentuali né obbliga all\'esternalizzazione, ma richiede consapevolezza e controllo dell\'intero flusso dei rifiuti.'
  },
  {
    id: 'D13', theme: 'prodotto', themeLabel: 'Prodotto',
    text: 'D13. [Prodotto] Il principio sulla sicurezza chimica (3.24) richiede ai fornitori di conformarsi a:',
    options: [
      'Solo il regolamento REACH europeo',
      'Il regolamento REACH e la RSL (Restricted Substances List) proprietaria del Gruppo Ferragamo',
      'Unicamente le normative nazionali del paese di produzione',
      'I soli standard ILO relativi ai rischi chimici per i lavoratori'
    ],
    correct: 1,
    explanation: 'Il principio 3.24 richiede la conformità sia al regolamento REACH europeo sia alla RSL (Restricted Substances List) proprietaria del Gruppo Ferragamo, che può essere più restrittiva del REACH stesso. Questo doppio livello di controllo aggiunge un layer di protezione per il brand oltre i minimi normativi.'
  },
  {
    id: 'D14', theme: 'prodotto', themeLabel: 'Prodotto',
    text: 'D14. [Prodotto] Cosa devono garantire i fornitori in materia di tracciabilità (3.25)?',
    options: [
      'L\'elenco completo di tutti i propri clienti e fornitori',
      'Le informazioni relative alla localizzazione di produzione e lavorazione dei materiali e prodotti',
      'I dati finanziari relativi ai costi di produzione per ogni commessa',
      'I certificati di qualità ISO 9001 per ogni fase di lavorazione'
    ],
    correct: 1,
    explanation: 'Il principio 3.25 richiede che i fornitori siano in grado di fornire informazioni sulla localizzazione geografica di produzione e lavorazione. Questo principio anticipa i requisiti del Digital Product Passport europeo e rappresenta la base per qualsiasi sistema di due diligence della supply chain.'
  },
  {
    id: 'D15', theme: 'gov', themeLabel: 'Governance',
    text: 'D15. [Governance] Riguardo alle attività di monitoraggio e audit, il Codice stabilisce che:',
    options: [
      'Ferragamo può effettuare audit solo presso i fornitori diretti, non presso i sub-fornitori',
      'Gli audit possono essere condotti dal Gruppo direttamente o tramite terzi, e possono estendersi a tutti i soggetti della supply chain',
      'I fornitori possono rifiutare le visite on-site se preavvisati con meno di 30 giorni',
      'Il monitoraggio è limitato alla richiesta di documentazione; le visite on-site richiedono consenso scritto del fornitore'
    ],
    correct: 1,
    explanation: 'Il Codice adotta un approccio di responsabilità estesa: gli audit possono essere condotti direttamente dal Gruppo o tramite terzi specializzati, e possono coinvolgere l\'intera supply chain, inclusi sub-fornitori. Il rifiuto di cooperare è esplicitamente equiparato a una non conformità.'
  },
  {
    id: 'D16', theme: 'gov', themeLabel: 'Governance',
    text: 'D16. [Governance] In quali circostanze il Gruppo può risolvere il rapporto commerciale con un fornitore?',
    options: [
      'Solo in caso di violazione della sezione relativa ai diritti umani',
      'Solo se il fornitore non supera un audit di terza parte',
      'In caso di violazioni gravi o ripetute, mancato rispetto di un piano di miglioramento, o rifiuto di cooperare nelle attività di monitoraggio',
      'Automaticamente dopo tre segnalazioni all\'Ethics Committee'
    ],
    correct: 2,
    explanation: 'Il sistema prevede una risposta graduata: prima si implementa un piano correttivo, poi — solo in caso di violazioni gravi o ripetute, mancato rispetto dei piani di miglioramento, o diniego di cooperazione — il Gruppo si riserva la facoltà di risolvere il rapporto e richiedere risarcimento danni.'
  },
  {
    id: 'D17', theme: 'gov', themeLabel: 'Governance',
    text: 'D17. [Governance] A chi devono essere segnalate le violazioni del Codice?',
    options: [
      'Il responsabile acquisti Ferragamo che gestisce il loro contratto',
      'L\'Ethics Committee, tramite email (ethics.committee@ferragamo.com) o posta (Via Mercalli 205/207, Sesto Fiorentino)',
      'Il Ministero del Lavoro del paese in cui opera il fornitore',
      'La sede centrale del Gruppo a Firenze tramite posta raccomandata'
    ],
    correct: 1,
    explanation: 'La sezione 7 indica specificamente l\'Ethics Committee come destinatario delle segnalazioni di violazione, con i relativi recapiti. Il Gruppo garantisce riservatezza e assenza di ritorsioni. I contatti commerciali vanno usati per chiarimenti interpretativi, non per le segnalazioni di violazione.'
  },
  {
    id: 'D18', theme: 'gov', themeLabel: 'Governance',
    text: 'D18. [Governance] Qual è la differenza strutturale tra le disposizioni scritte in testo normale e quelle in corsivo nel Codice?',
    options: [
      'Le disposizioni in corsivo si applicano solo ai fornitori di primo livello, non ai sub-fornitori',
      'Il testo normale contiene gli obblighi vincolanti ("are required to"); il corsivo contiene raccomandazioni/best practice ("encourages")',
      'Le disposizioni in corsivo riguardano solo l\'area ambientale e il benessere animale',
      'Non esiste una differenza formale: il corsivo è usato solo per enfasi stilistica'
    ],
    correct: 1,
    explanation: 'Il Codice adotta sistematicamente un duplice registro: il testo normale contiene gli obblighi minimi non negoziabili ("are required to"), mentre le parti in corsivo contengono raccomandazioni che il Gruppo incoraggia ma non impone. Questa struttura permette un percorso di miglioramento graduale adatto a fornitori di diverse dimensioni.'
  },
  {
    id: 'D19', theme: 'gov', themeLabel: 'Governance',
    text: 'D19. [Misto] Il Supplier Code of Conduct ha rilevanza per la CSRD perché:',
    options: [
      'È richiesto direttamente dalla CSRD come allegato obbligatorio del report di sostenibilità',
      'Dimostra l\'esistenza di processi di due diligence sulla supply chain, che la CSRD richiede di rendicontare relativamente all\'intera catena del valore',
      'Sostituisce il report di sostenibilità per le aziende con meno di 500 dipendenti',
      'È riconosciuto dalla CSRD come standard equivalente all\'ESRS per i diritti umani'
    ],
    correct: 1,
    explanation: 'La CSRD richiede alle imprese di rendicontare gli impatti ESG dell\'intera catena del valore (non solo delle operazioni dirette). Un Codice fornitori formalizzato dimostra che esistono processi di screening e due diligence della supply chain, elemento essenziale per la rendicontazione ESRS.'
  },
  {
    id: 'D20', theme: 'gov', themeLabel: 'Misto',
    text: 'D20. [Misto] Quale principio del Codice è più direttamente collegato al Digital Product Passport (DPP) previsto dalla strategia europea per prodotti sostenibili?',
    options: [
      '3.18 (Protezione dell\'ambiente)',
      '3.24 (Sicurezza chimica dei prodotti)',
      '3.25 (Tracciabilità dei materiali e dei prodotti)',
      '3.7 (Made in Italy)'
    ],
    correct: 2,
    explanation: 'Il DPP europeo richiede informazioni digitali dettagliate sulla composizione, origine e impatto dei prodotti lungo l\'intera catena del valore. Il principio 3.25 sulla tracciabilità dei materiali è il più direttamente collegato a questo futuro obbligo normativo, che rappresenterà un requisito obbligatorio per molte categorie di prodotti.'
  }
];

const AREAS = [
  { label: 'Etica', qs: ['D1','D2','D3','D4'], theme: 'etica' },
  { label: 'Lavoro', qs: ['D5','D6','D7','D8','D9'], theme: 'lavoro' },
  { label: 'Ecosistemi', qs: ['D10','D11','D12'], theme: 'ecosist' },
  { label: 'Prodotto', qs: ['D13','D14'], theme: 'prodotto' },
  { label: 'Governance', qs: ['D15','D16','D17','D18','D19','D20'], theme: 'gov' }
];

let userAnswers = {};
let submitted = false;

document.getElementById('field-data').value = new Date().toISOString().split('T')[0];

document.getElementById('btn-start').addEventListener('click', () => {
  document.getElementById('intro-card').style.display = 'none';
  document.getElementById('quiz-area').style.display = 'block';
  renderQuestions();
  updateProgress();
});

function renderQuestions() {
  const container = document.getElementById('questions-container');
  container.innerHTML = '';
  QUESTIONS.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'question-card';
    card.id = `qcard-${q.id}`;
    const letters = ['A','B','C','D'];
    const optionsHTML = q.options.map((opt, oi) => `
      <li class="option-item" data-q="${q.id}" data-opt="${oi}" onclick="selectOption('${q.id}', ${oi})">
        <span class="option-letter">${letters[oi]}</span>
        <span class="option-text">${opt}</span>
      </li>`).join('');
    card.innerHTML = `
      <div class="q-header">
        <div class="q-num">${qi + 1}</div>
        <div class="q-theme-tag ${q.theme}">${q.themeLabel}</div>
        <div class="q-status" id="qstatus-${q.id}"></div>
      </div>
      <div class="q-text">${q.text}</div>
      <ul class="options-list" id="opts-${q.id}">${optionsHTML}</ul>
      <div class="explanation" id="expl-${q.id}"></div>
      <div class="q-nav">
        <button class="btn-confirm" id="btn-confirm-${q.id}" disabled onclick="confirmAnswer('${q.id}')">Conferma →</button>
      </div>`;
    container.appendChild(card);
  });
}

function selectOption(qid, optIdx) {
  if (submitted || userAnswers[qid] !== undefined) return;
  const opts = document.querySelectorAll(`[data-q="${qid}"]`);
  opts.forEach(el => el.classList.remove('selected'));
  document.querySelector(`[data-q="${qid}"][data-opt="${optIdx}"]`).classList.add('selected');
  userAnswers[`pending_${qid}`] = optIdx;
  document.getElementById(`btn-confirm-${qid}`).disabled = false;
}

function confirmAnswer(qid) {
  const optIdx = userAnswers[`pending_${qid}`];
  if (optIdx === undefined) return;
  const q = QUESTIONS.find(q => q.id === qid);
  userAnswers[qid] = optIdx;
  delete userAnswers[`pending_${qid}`];
  const opts = document.querySelectorAll(`[data-q="${qid}"]`);
  opts.forEach(el => {
    el.classList.remove('selected');
    el.classList.add('locked');
    const oi = parseInt(el.dataset.opt);
    if (oi === q.correct) el.classList.add('correct');
    else if (oi === optIdx) el.classList.add('wrong');
  });
  const isCorrect = optIdx === q.correct;
  const statusEl = document.getElementById(`qstatus-${qid}`);
  statusEl.textContent = isCorrect ? '✓' : '✗';
  statusEl.style.opacity = '1';
  statusEl.style.color = isCorrect ? 'var(--correct)' : 'var(--wrong)';
  const explEl = document.getElementById(`expl-${qid}`);
  explEl.innerHTML = `<strong>${isCorrect ? '✓ Risposta corretta.' : '✗ Risposta non corretta.'}</strong> ${q.explanation}`;
  explEl.classList.add('show');
  document.getElementById(`btn-confirm-${qid}`).style.display = 'none';
  document.getElementById(`qcard-${qid}`).classList.add('answered');
  updateProgress();
  checkAllAnswered();
}

function updateProgress() {
  const answered = QUESTIONS.filter(q => userAnswers[q.id] !== undefined).length;
  const pct = (answered / QUESTIONS.length) * 100;
  document.getElementById('progress-bar-fill').style.width = pct + '%';
  document.getElementById('progress-counter').textContent = answered + '/20';
}

function checkAllAnswered() {
  const answered = QUESTIONS.filter(q => userAnswers[q.id] !== undefined).length;
  if (answered === QUESTIONS.length) {
    document.getElementById('submit-section').style.display = 'block';
    document.getElementById('submit-section').scrollIntoView({ behavior: 'smooth', block: 'center' });
  }
}

document.getElementById('btn-submit').addEventListener('click', () => {
  submitted = true;
  document.getElementById('quiz-area').style.display = 'none';
  document.getElementById('results-section').style.display = 'block';
  renderResults();
  document.getElementById('results-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
});

function renderResults() {
  const score = QUESTIONS.filter(q => userAnswers[q.id] === q.correct).length;
  const pct = Math.round((score / 20) * 100);
  document.getElementById('score-num').innerHTML = `${score}<span class="score-denom">/20</span>`;
  document.getElementById('score-pct').textContent = `${pct}% — ${score} risposte corrette`;
  let grade, gradeCls, trent, dec;
  if (score >= 18) { grade = 'Eccellente'; gradeCls = 'eccellente'; trent = '27–30 / 30'; dec = '9–10 / 10'; }
  else if (score >= 15) { grade = 'Buono'; gradeCls = 'buono'; trent = '23–26 / 30'; dec = '7–8 / 10'; }
  else if (score >= 13) { grade = 'Sufficiente'; gradeCls = 'suff'; trent = '18–22 / 30'; dec = '6 / 10'; }
  else if (score >= 10) { grade = 'Insufficiente'; gradeCls = 'insuff'; trent = '12–17 / 30'; dec = '5 / 10'; }
  else { grade = 'Non sufficiente'; gradeCls = 'insuff'; trent = '< 12 / 30'; dec = '< 5 / 10'; }
  const badge = document.getElementById('grade-badge');
  badge.textContent = grade;
  badge.className = 'grade-badge ' + gradeCls;
  document.getElementById('r-trent').textContent = trent;
  document.getElementById('r-dec').textContent = dec;
  document.getElementById('r-level').textContent = grade;
  const areaBreak = document.getElementById('area-breakdown');
  areaBreak.innerHTML = AREAS.map(area => {
    const correct = area.qs.filter(id => {
      const q = QUESTIONS.find(q => q.id === id);
      return userAnswers[id] === q.correct;
    }).length;
    const isPerfect = correct === area.qs.length;
    return `<div class="area-cell">
      <div class="area-cell-name">${area.label}</div>
      <div class="area-cell-score${isPerfect ? ' perfect' : ''}">${correct}/${area.qs.length}</div>
    </div>`;
  }).join('');
}

document.getElementById('btn-review').addEventListener('click', () => {
  document.getElementById('results-section').style.display = 'none';
  document.getElementById('quiz-area').style.display = 'block';
  document.getElementById('submit-section').style.display = 'none';
  window.scrollTo({ top: 0, behavior: 'smooth' });
});

document.getElementById('btn-reset').addEventListener('click', () => {
  userAnswers = {};
  submitted = false;
  document.getElementById('results-section').style.display = 'none';
  document.getElementById('intro-card').style.display = 'block';
  document.getElementById('quiz-area').style.display = 'none';
  document.getElementById('progress-bar-fill').style.width = '0%';
  document.getElementById('progress-counter').textContent = '0/20';
  window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
</body>
</html>
